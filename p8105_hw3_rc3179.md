Homework 3
================
RuiJun Chen
10/14/2019

## Problem 1

``` r
library(p8105.datasets)
data("instacart")
```

The Instacart dataset shows that there are a total of 1384617
observations/rows across 131209 unique orders placed on Instacart. Each
observation or row represents an item order, and there are 15 variables
or columns which include order\_id, product\_id, add\_to\_cart\_order,
reordered, user\_id, eval\_set, order\_number, order\_dow,
order\_hour\_of\_day, days\_since\_prior\_order, product\_name,
aisle\_id, department\_id, aisle, department. These variables include
information on when the items were ordered, which user ordered it, how
often it has been reordered, along with information on the item itself
such as the name or department/aisle it is in. There are 21 unique
departments from alcohol to snacks. There are a total of 39123 unique
products available, with orders placed between the hours of 0 and 23

``` r
instacart %>% 
  group_by(aisle) %>% 
  summarize(n_orders = n()) %>% 
  arrange(desc(n_orders))
```

    ## # A tibble: 134 x 2
    ##    aisle                         n_orders
    ##    <chr>                            <int>
    ##  1 fresh vegetables                150609
    ##  2 fresh fruits                    150473
    ##  3 packaged vegetables fruits       78493
    ##  4 yogurt                           55240
    ##  5 packaged cheese                  41699
    ##  6 water seltzer sparkling water    36617
    ##  7 milk                             32644
    ##  8 chips pretzels                   31269
    ##  9 soy lactosefree                  26240
    ## 10 bread                            23635
    ## # … with 124 more rows

There are a total of 134 aisles and fresh vegetables and fresh fruits,
respectively, are the top 2 aisles which have the most items ordered
from them.

``` r
instacart %>% 
  group_by(aisle) %>% 
  summarize(n_orders = n()) %>% 
  filter(n_orders > 10000) %>% 
  ggplot(aes(x = aisle, y = n_orders)) +
  geom_col() +
  labs(title = "Number of items ordered in each aisle", caption = "(min 10000 items), arranged alphabetically") +
  theme(axis.text.x = element_text(angle=90))
```

<img src="p8105_hw3_rc3179_files/figure-gfm/unnamed-chunk-3-1.png" width="90%" />

Table of 3 most popular items in aisles “baking ingredients”, “dog food
care”, and “packaged vegetables fruits”

``` r
instacart %>% 
  filter(aisle == 'baking ingredients' | aisle == "dog food care" | aisle == "packaged vegetables fruits") %>% 
  group_by(aisle, product_name) %>% 
  summarize(n_orders = n()) %>% 
  arrange(desc(n_orders)) %>% 
  mutate(rank = rank(desc(n_orders))) %>% 
  filter(rank<=3) %>% 
  knitr::kable()
```

| aisle                      | product\_name                                 | n\_orders | rank |
| :------------------------- | :-------------------------------------------- | --------: | ---: |
| packaged vegetables fruits | Organic Baby Spinach                          |      9784 |    1 |
| packaged vegetables fruits | Organic Raspberries                           |      5546 |    2 |
| packaged vegetables fruits | Organic Blueberries                           |      4966 |    3 |
| baking ingredients         | Light Brown Sugar                             |       499 |    1 |
| baking ingredients         | Pure Baking Soda                              |       387 |    2 |
| baking ingredients         | Cane Sugar                                    |       336 |    3 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |        30 |    1 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |        28 |    2 |
| dog food care              | Small Dog Biscuits                            |        26 |    3 |

``` r
instacart %>% 
  filter(product_name == "Pink Lady Apples" | product_name == "Coffee Ice Cream") %>% 
  group_by(product_name, order_dow) %>% 
  summarize(mean_hour_of_day = mean(order_hour_of_day)) %>% 
  pivot_wider(
    names_from = order_dow,
    values_from = mean_hour_of_day
  ) %>% 
  knitr::kable()
```

| product\_name    |        0 |        1 |        2 |        3 |        4 |        5 |        6 |
| :--------------- | -------: | -------: | -------: | -------: | -------: | -------: | -------: |
| Coffee Ice Cream | 13.77419 | 14.31579 | 15.38095 | 15.31818 | 15.21739 | 12.26316 | 13.83333 |
| Pink Lady Apples | 13.44118 | 11.36000 | 11.70213 | 14.25000 | 11.55172 | 12.78431 | 11.93750 |
